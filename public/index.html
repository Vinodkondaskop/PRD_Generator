<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI PRD Workbench</title>
    <link rel="stylesheet" href="style.css?v=2.2">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-shell">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-box">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="24" height="24" rx="6" fill="#1d4ed8" />
                        <path d="M7 12L10 15L17 8" stroke="white" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </div>
                <h2>AI PRD Workbench</h2>
            </div>

            <nav class="sidebar-nav">
                <div class="input-section">
                    <label>FEATURE NAME</label>
                    <input type="text" id="featureName" placeholder="e.g. Smart Notification Engine">

                    <label>PROBLEM STATEMENT</label>
                    <textarea id="problemStatement" placeholder="What pain point are we solving?"></textarea>

                    <div class="row">
                        <div class="col">
                            <label>BUSINESS OBJECTIVE</label>
                            <input type="text" id="businessObjective" placeholder="e.g. Increase Retention">
                        </div>
                        <div class="col">
                            <label>SUCCESS METRICS</label>
                            <input type="text" id="successMetrics" placeholder="e.g. +15% DAU">
                        </div>
                    </div>

                    <label>TARGET PERSONA</label>
                    <input type="text" id="targetPersona" placeholder="e.g. Enterprise Admins">

                    <label>CONSTRAINTS & DEPENDENCIES</label>
                    <textarea id="constraints" placeholder="Technical debt, API limits, etc."></textarea>
                </div>

                <div class="sidebar-footer">
                    <button id="generateBtn" class="primary-btn">Generate PRD Draft</button>
                    <div id="statusIndicator" class="status-indicator">
                        <span class="dot"></span>
                        <span class="label">Ready to generate context...</span>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Main Workspace -->
        <main class="workbench">
            <header class="top-bar">
                <nav class="tabs">
                    <button class="tab active">DOCUMENT</button>
                    <button class="tab">HISTORY</button>
                    <button class="tab">SETTINGS</button>
                </nav>
            </header>

            <div class="document-container">
                <article class="document-content">
                    <div class="doc-meta">
                        <span class="badge">V2.5 DRAFT</span>
                        <span class="date">• EXPERT MODE</span>
                    </div>
                    <h1 id="docTitle">Workbench Ready</h1>
                    <p id="docSubtitle">Fill out the context in the sidebar or use the Assistant ✨ to begin.</p>

                    <div id="prdOutput" class="markdown-body">
                        <!-- Content will be streamed here -->
                    </div>
                </article>
            </div>

            <!-- Float UI -->
            <div class="float-controls">
                <button id="chatToggleBtn" class="icon-btn primary-icon-btn" title="PM Assistant ✨">✨</button>
            </div>
        </main>
    </div>

    <!-- Chat Overlay -->
    <div id="chatOverlay" class="chat-overlay hidden">
        <div class="chat-header">
            <div class="header-info">
                <h3>PM Assistant</h3>
                <span class="status">Guided Mode Active</span>
            </div>
            <button id="closeChatBtn" class="close-btn">×</button>
        </div>
        <div id="chatMessages" class="chat-messages">
            <div class="msg assistant">
                Hello! I'm your AI PM Assistant. Paste your raw notes or "brain dump" here, and I'll help you refine
                them into a structured PRD step-by-step.
            </div>
        </div>
        <div class="chat-input-area">
            <textarea id="chatInput" placeholder="Type your brain dump or answer..."></textarea>
            <button id="sendMsgBtn">Send</button>
        </div>
    </div>

    <script src="app.js?v=2.3"></script>
</body>

</html>